(this["webpackJsonpski-rental-react"]=this["webpackJsonpski-rental-react"]||[]).push([[0],{29:function(e,t,n){e.exports={rental:"NewRental_rental__2noXE"}},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(26),s=n.n(r),o=(n(35),n(12)),i=n(13),l=n(15),j=n(14),u=n(10),h=n(2),d=(n(36),n(37),n(0));var b=function(e){return Object(d.jsxs)("div",{className:"nav",children:[Object(d.jsx)("div",{children:Object(d.jsx)("h1",{children:"Ski Rental App"})}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/",activeClassName:"active",children:"Home"})}),e.currentUser&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/rentals",activeClassName:"active",children:"Rentals"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/rentals/new",activeClassName:"active",children:"Create a Rental"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"",activeClassName:"active",onClick:e.handleLogout,children:"Logout"})}),Object(d.jsx)("li",{children:Object(d.jsxs)("span",{className:"user",children:["Welcome ",e.currentUser.firstName]})})]}),!e.currentUser&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/login",activeClassName:"active",children:"Login"})}),Object(d.jsx)("li",{children:Object(d.jsx)(u.b,{to:"/signup",activeClassName:"active",children:"Signup"})})]})]})]})};function p(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var O={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:p,getUserFromToken:function(){var e=p();return e?JSON.parse(atob(e.split(".")[1])).user:null},removeToken:function(){localStorage.removeItem("token")}},m="/api/users";var x={signup:function(e){return fetch("".concat(m,"/signup"),{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Email already taken")})).then((function(e){var t=e.token;return O.setToken(t)}))},getUser:function(){return O.getUserFromToken()},login:function(e){return fetch("".concat(m,"/login"),{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Username or password incorrect!")})).then((function(e){var t=e.token;return O.setToken(t)}))},logout:function(){O.removeToken()}},f=n(5),v=n(3),g=n.n(v),N=n(7),k=n(17),S=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(k.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(N.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,x.signup(a.state);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),a.state={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},a}return Object(i.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(d.jsx)("h3",{children:"Sign Up"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"text",placeholder:"First Name",className:"form-control",name:"firstName",onChange:this.handleChange})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"text",placeholder:" Last Name",className:"form-control",name:"lastName",onChange:this.handleChange})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"email",placeholder:"Email",className:"form-control",name:"email",onChange:this.handleChange})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"password",placeholder:"Password",className:"form-control",name:"password",onChange:this.handleChange})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"password",placeholder:"Confirm Pasword",name:"confirmPassword",className:"form-control",onChange:this.handleChange})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("button",{className:"btn btn-default",children:"Sign up"})})]})}}]),n}(a.Component),C=S,w=(n(45),function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).updateMessage=function(e){a.setState({message:e})},a.state={message:""},a}return Object(i.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"SignupPage",children:[Object(d.jsx)(C,Object(f.a)(Object(f.a)({},this.props),{},{updateMessage:this.updateMessage})),Object(d.jsx)("p",{children:this.state.message})]})}}]),n}(a.Component)),y=(n(46),function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(k.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(N.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,x.login(a.state);case 4:a.props.handleSignupOrLogin(),a.props.history.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.state={email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"LoginPage",children:Object(d.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(d.jsx)("h3",{children:"Log In"}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"email",placeholder:"Email",className:"form-control",name:"email",onChange:this.handleChange})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"password",placeholder:"Password",className:"form-control",name:"password",onChange:this.handleChange})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("button",{className:"btn btn-default",children:"Log in"})})]})})}}]),n}(a.Component)),T=y,R=n(18);function U(e){return L.apply(this,arguments)}function L(){return(L=Object(N.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",fetch("http://localhost:4000/api/rentals",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(t)}).then((function(e){return e.json()})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(N.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://localhost:4000/api/rentals/delete/".concat(t),{method:"Delete"}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(N.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("http://localhost:4000/api/rentals",{method:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer "+O.getToken()}}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E={createRental:U,deleteRental:function(e){return P.apply(this,arguments)},getUserRentals:function(){return D.apply(this,arguments)}};n(47);var F=function(){var e=Object(a.useState)({}),t=Object(R.a)(e,2),n=t[0],c=t[1];Object(h.g)(),Object(a.useEffect)(Object(N.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getUserRentals();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))),[]);var r=function(){var e=Object(N.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.deleteRental(n);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"body",children:Object(d.jsxs)("div",{className:"list-container",children:[(null===n||void 0===n?void 0:n.length)>0&&Object(d.jsx)("ul",{children:null===n||void 0===n?void 0:n.map((function(e,t){var n;return Object(d.jsxs)("li",{className:"rental",children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"card-top",children:[Object(d.jsx)("button",{className:"btn btn-danger delete-button",onClick:function(t){return r(t,e._id)},children:"X"}),Object(d.jsxs)("h4",{children:["Rental ",t+1]})]}),Object(d.jsxs)("div",{className:"rental-dates",children:[Object(d.jsxs)("p",{children:["Rental Date: ",e.dateRented.split("T")[0]]}),Object(d.jsxs)("p",{children:["Return Date: ",e.returnDate.split("T")[0]]})]})]}),Object(d.jsx)("div",{children:Object(d.jsx)("ul",{className:"equipment-list",children:null===e||void 0===e||null===(n=e.equipment)||void 0===n?void 0:n.map((function(e,t){return Object(d.jsxs)("li",{className:"equipment-set",children:[Object(d.jsx)("div",{children:Object(d.jsxs)("h5",{children:["Equipment Set ",t+1]})}),Object(d.jsxs)("div",{children:["Skis: ",e.skis]}),Object(d.jsxs)("div",{children:["Poles: ",e.poles]}),Object(d.jsxs)("div",{children:["Helmet: ",e.helmet]}),Object(d.jsxs)("div",{children:["Boots: ",e.boots]})]},t)}))})})]},t)}))}),0===(null===n||void 0===n?void 0:n.length)&&Object(d.jsx)("div",{children:Object(d.jsx)("h1",{children:"You haven't rented any equipment"})})]})})},q=n(11),I=n(29),K=n.n(I);var V=function(e){var t=Object(a.useState)(""),n=Object(R.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),o=Object(R.a)(s,2),i=o[0],l=o[1],j=Object(a.useState)([]),u=Object(R.a)(j,2),b=u[0],p=u[1],O=Object(h.g)(),m=function(){var e=Object(N.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={dateRented:c,returnDate:i,equipment:b,isReturned:!1},e.next=4,U(n);case 4:e.sent,O.push("/rentals");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:K.a.rental,children:[Object(d.jsx)("h3",{children:"Add New Rental"}),Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Date Rented"}),Object(d.jsx)("input",{value:c,type:"date",className:"form-control",onChange:function(e){r(e.target.value)}})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Return Date"}),Object(d.jsx)("input",{value:i,type:"date",className:"form-control",onChange:function(e){l(e.target.value)}})]}),Object(d.jsxs)("div",{children:[b.map((function(e,t){return Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsxs)("label",{children:["Equipment Set ",t+1]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Skis"}),Object(d.jsxs)("select",{value:e.skis,onChange:function(e){p([].concat(Object(q.a)(b.slice(0,t)),[Object(f.a)(Object(f.a)({},b[t]),{},{skis:e.target.value})],Object(q.a)(b.slice(t+1))))},name:"skis",children:[Object(d.jsx)("option",{value:"",children:"-"}),Object(d.jsx)("option",{value:"Salomon",children:"Salomon"}),Object(d.jsx)("option",{value:"K2",children:"K2"}),Object(d.jsx)("option",{value:"Volkl",children:"Volkl"})]})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Poles"}),Object(d.jsxs)("select",{value:e.poles,onChange:function(e){p([].concat(Object(q.a)(b.slice(0,t)),[Object(f.a)(Object(f.a)({},b[t]),{},{poles:e.target.value})],Object(q.a)(b.slice(t+1))))},name:"poles",children:[Object(d.jsx)("option",{value:"",children:"-"}),Object(d.jsx)("option",{value:"Salomon",children:"Salomon"}),Object(d.jsx)("option",{value:"K2",children:"K2"}),Object(d.jsx)("option",{value:"Volkl",children:"Volkl"})]})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Helmet"}),Object(d.jsxs)("select",{value:e.helmet,onChange:function(e){p([].concat(Object(q.a)(b.slice(0,t)),[Object(f.a)(Object(f.a)({},b[t]),{},{helmet:e.target.value})],Object(q.a)(b.slice(t+1))))},name:"helmet",children:[Object(d.jsx)("option",{value:"",children:"-"}),Object(d.jsx)("option",{value:"Salomon",children:"Salomon"}),Object(d.jsx)("option",{value:"K2",children:"K2"}),Object(d.jsx)("option",{value:"Volkl",children:"Volkl"})]})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Boots"}),Object(d.jsxs)("select",{value:e.boots,onChange:function(e){p([].concat(Object(q.a)(b.slice(0,t)),[Object(f.a)(Object(f.a)({},b[t]),{},{boots:e.target.value})],Object(q.a)(b.slice(t+1))))},name:"boots",children:[Object(d.jsx)("option",{value:"",children:"-"}),Object(d.jsx)("option",{value:"Salomon",children:"Salomon"}),Object(d.jsx)("option",{value:"K2",children:"K2"}),Object(d.jsx)("option",{value:"Volkl",children:"Volkl"})]})]})]},t)})),Object(d.jsx)("button",{className:"btn btn-primary",onClick:function(e){e.preventDefault(),p([].concat(Object(q.a)(b),[{skis:"",poles:"",helmet:"",boots:""}]))},children:"Add Equipment"})]}),Object(d.jsx)("button",{className:"btn btn-primary",onClick:m,children:"Submit"})]})]})},J=n(30),A=["component"];var H=function(e){var t=e.component,n=Object(J.a)(e,A),a=x.getUser();return Object(d.jsx)(h.b,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return a?Object(d.jsx)(t,Object(f.a)({},e)):Object(d.jsx)(h.a,{to:"/login"})}}))},B=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleSignupOrLogin=function(){e.setState({user:x.getUser()})},e.handleLogout=function(){x.logout(),e.setState({user:null})},e.state={user:x.getUser()},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(d.jsxs)(u.a,{children:[Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(b,{currentUser:this.state.user,handleLogout:this.handleLogout})}),Object(d.jsxs)(h.d,{children:[Object(d.jsx)(h.b,{path:"/",exact:!0,children:Object(d.jsx)("h1",{children:"Welcome to the Ski Rental App"})}),Object(d.jsx)(H,{exact:!0,path:"/rentals",children:Object(d.jsx)(F,{currentUser:this.state.user})}),Object(d.jsx)(H,{path:"/rentals/new",component:Object(d.jsx)(V,{currentUser:this.state.user}),children:Object(d.jsx)(V,{currentUser:this.state.user})}),Object(d.jsx)(h.b,{path:"/signup",children:Object(d.jsx)(w,{})}),Object(d.jsx)(h.b,{path:"/login",render:function(t){var n=t.history;return Object(d.jsx)(T,{history:n,handleSignupOrLogin:e.handleSignupOrLogin})}})]})]})}}]),n}(a.Component),M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root")),M()}},[[48,1,2]]]);
//# sourceMappingURL=main.be409e71.chunk.js.map